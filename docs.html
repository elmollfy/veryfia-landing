<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>VERYFIA ‚Äì Documentaci√≥n de la API</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Usa la misma hoja de estilos de tu landing -->
  <link rel="stylesheet" href="style.css" />
  <style>
    .page { max-width: 920px; margin: 2rem auto; padding: 0 1rem; }
    .toc a { text-decoration: none; }
    pre { position: relative; padding: 1rem; overflow: auto; border-radius: 8px; background: #0f172a; color: #e2e8f0; }
    pre .copy { position: absolute; top: .5rem; right: .5rem; border: 0; padding: .35rem .6rem; cursor: pointer; }
    code { white-space: pre-wrap; }
    .muted { color: #64748b; font-size: .95rem; }
    h1,h2,h3 { scroll-margin-top: 80px; }
    .endpoint { margin-top: 1.5rem; }
    .pill { display:inline-block; font-size:.8rem; padding:.2rem .5rem; border-radius:999px; background:#eef2ff; color:#3730a3; margin-left:.5rem;}
    .note { padding:.75rem 1rem; background:#eef2ff; border:1px solid #c7d2fe; border-radius:8px; margin:1rem 0; }
  </style>
</head>
<body>
  <div class="page">
    <h1>üìÑ VERYFIA API Docs</h1>
    <p class="muted">Gu√≠a para integrar la certificaci√≥n en blockchain de archivos generados por IA.</p>

    <div class="note">
      <strong>Base URL de la API:</strong>
      <code>https://veryfia-web.onrender.com</code>
    </div>

    <h2 id="indice">√çndice</h2>
    <div style="padding:.75rem 1rem; background:#f8fafc; border:1px solid #e5e7eb; border-radius:8px; margin:1rem 0;">
  <strong>Prueba r√°pida:</strong>
  <a href="https://veryfia-web.onrender.com/proof/0x2fd889940a0da04aab43da4f76d99c244d7607980b8ddbab8f71f655b68d5091" target="_blank" rel="noopener">/proof</a> ¬∑
  <a href="https://veryfia-web.onrender.com/history/0x2fd889940a0da04aab43da4f76d99c244d7607980b8ddbab8f71f655b68d5091" target="_blank" rel="noopener">/history</a> ¬∑
  <a href="https://polygonscan.com/tx/0x77cce37891aafd2db0c19bcaa1f2ab3e0ca1ac1a865762726bc0b49e89de7aa2" target="_blank" rel="noopener">Polygonscan</a>
</div>

    <ul class="toc">
      <li><a href="#auth">1. Autenticaci√≥n</a></li>
      <li><a href="#endpoints">2. Endpoints</a></li>
      <li><a href="#mejoras">3. Pr√≥ximas mejoras</a></li>
      <li><a href="#contacto">4. Contacto</a></li>
    </ul>

    <h2 id="auth">1) Autenticaci√≥n</h2>
    <p>Usa tu <strong>API Key</strong>:</p>
    <ul>
      <li><code>/upload</code> ‚Üí <em>opcional</em> (recomendado para uso program√°tico).</li>
      <li><code>/api/register</code> ‚Üí <strong>obligatorio</strong>.</li>
    </ul>

    <h2 id="endpoints">2) Endpoints</h2>

    <div class="endpoint">
      <h3>POST /upload <span class="pill">multipart/form-data</span></h3>
      <p>Sube un archivo para certificarlo (m√°x. 5MB).</p>
      <pre><button class="copy">copiar</button><code>curl -X POST https://veryfia-web.onrender.com/upload ^
  -F "file=@miarchivo.pdf" ^
  -F "api_key=clave456"</code></pre>
    </div>

    <div class="endpoint">
      <h3>POST /api/register <span class="pill">application/json</span></h3>
      <p>Registra directamente el <code>hash</code> SHA-256 de un archivo (sin subir el archivo).</p>
      <pre><button class="copy">copiar</button><code># Windows CMD
curl -X POST https://veryfia-web.onrender.com/api/register ^
  -H "Content-Type: application/json" ^
  -d "{\"api_key\":\"clave456\",\"file_hash\":\"2fd889940a0da04aab43da4f76d99c244d7607980b8ddbab8f71f655b68d5091\"}"

# Windows PowerShell
curl -Method POST https://veryfia-web.onrender.com/api/register `
  -Headers @{ "Content-Type" = "application/json" } `
  -Body '{"api_key":"clave456","file_hash":"2fd889940a0da04aab43da4f76d99c244d7607980b8ddbab8f71f655b68d5091"}'

# macOS / Linux
curl -X POST https://veryfia-web.onrender.com/api/register \
  -H 'Content-Type: application/json' \
  -d '{"api_key":"clave456","file_hash":"2fd889940a0da04aab43da4f76d99c244d7607980b8ddbab8f71f655b68d5091"}'</code></pre>
    </div>

    <div class="endpoint">
      <h3>GET /proof/&lt;hash&gt;</h3>
      <p>Devuelve JSON con <code>file_hash</code>, <code>merkleRoot</code>, <code>txHash</code> y <code>anchoredAt</code>.</p>
      <pre><button class="copy">copiar</button><code>curl -s https://veryfia-web.onrender.com/proof/2fd889940a0... | jq .</code></pre>
    </div>

    <div class="endpoint">
      <h3>GET /pdf/&lt;hash&gt;</h3>
      <p>Descarga el certificado PDF.</p>
      <pre><button class="copy">copiar</button><code>curl -L -o certificado.pdf https://veryfia-web.onrender.com/pdf/2fd889940a0...</code></pre>
    </div>

    <div class="endpoint">
      <h3>GET /history/&lt;hash&gt;</h3>
      <p>P√°gina HTML con historial del archivo (hash, merkle root, fecha, TX).</p>
      <pre><button class="copy">copiar</button><code>https://veryfia-web.onrender.com/history/2fd889940a0...</code></pre>
    </div>

    <h2 id="mejoras">3) Pr√≥ximas mejoras</h2>
    <ul>
      <li>Guardado y visualizaci√≥n del Merkle path real.</li>
      <li>Panel para developers con estad√≠sticas de uso.</li>
    </ul>

    <h2 id="contacto">4) Contacto</h2>
    <p>Solicita tu API Key: <a href="mailto:tu_email@ejemplo.com">tu_email@ejemplo.com</a></p>

    <p><a href="index.html">‚¨ÖÔ∏è Volver a la home</a></p>
  </div>

  <script>
    // Botones "copiar" para los snippets
    document.querySelectorAll('pre .copy').forEach(btn => {
      btn.addEventListener('click', () => {
        const code = btn.parentElement.querySelector('code').innerText;
        navigator.clipboard.writeText(code);
        const old = btn.textContent;
        btn.textContent = "copiado ‚úì";
        setTimeout(()=> btn.textContent = old, 1200);
      });
    });
  </script>
</body>
</html>

